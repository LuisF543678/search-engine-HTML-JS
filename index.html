<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-5">
        <h1>Buscador indexOf</h1>
        <input class="form-control my-2" type="text" id=formulario>
        <button class="btn btn-info mb-2" id="boton">Buscar</button>
        <ul id="resultado">

        </ul>
    </div>

    <script>

        const productos = [
            { nombre: 'Platanos', valor: 500 },
            { nombre: 'Pera', valor: 500 },
            { nombre: 'Sandia', valor: 500 },
            { nombre: 'Melon', valor: 500 },
            { nombre: 'Fritillas', valor: 500 }
        ];


        const formulario = document.querySelector('#formulario');
        const boton = document.querySelector('#boton');
        const resultado = document.querySelector('#resultado');

        const filtrar = () => {
            /* console.log(formulario.value); */
            resultado.innerHTML = '';
            const texto = formulario.value.toLowerCase();
            for (let producto of productos) {
                let nombre = producto.nombre.toLowerCase();
                if (nombre.indexOf(texto) !== -1) {
                    resultado.innerHTML +=
                        `<li>${producto.nombre} - Valor: ${producto.valor}</li>`;
                }
            }
            if (resultado.innerHTML === '') {
                resultado.innerHTML += `<li>Producto no encontrado...</li>`;
            }
        }

        boton.addEventListener('click', filtrar);
        formulario.addEventListener('keyup',filtrar);
        filtrar();

    </script>
    
</body>

</html>